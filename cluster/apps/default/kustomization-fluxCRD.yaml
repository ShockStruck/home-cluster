apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-redis
  namespace: flux-system
spec:
  path: ./cluster/apps/default/redis
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: redis
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-ingresses
  namespace: flux-system
spec:
  path: ./cluster/apps/default/ingresses
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  dependsOn:
    - name: ingress-system-traefik

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-postgrescluster
  namespace: flux-system
spec:
  path: ./cluster/apps/default/postgrescluster
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: postgres-operator.crunchydata.com/v1beta1
      kind: PostgresCluster
      name: pgo-cluster
      namespace: default
  dependsOn:
    - name: postgres-operator-postgres-operator
    - name: rook-ceph-rook-ceph
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-clusterpolicies
  namespace: flux-system
spec:
  path: ./cluster/apps/default/clusterpolicies
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  dependsOn:
    - name: kyverno-kyverno

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-common
  namespace: flux-system
spec:
  path: ./cluster/apps/default/common
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  dependsOn:
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-adminer
  namespace: flux-system
spec:
  path: ./cluster/apps/default/adminer
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: adminer
      namespace: default

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-bazarr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/bazarr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: bazarr
      namespace: default
  dependsOn:
    - name: nfs-system-nfs-provisioner
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-external
  namespace: flux-system
spec:
  path: ./cluster/apps/default/external
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  dependsOn:
    - name: ingress-system-traefik

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-firefly-iii
  namespace: flux-system
spec:
  path: ./cluster/apps/default/firefly-iii
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: firefly-iii
      namespace: default
  dependsOn:
    - name: default-postgrescluster
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-flaresolverr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/flaresolverr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: flaresolverr
      namespace: default

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-goldilocks
  namespace: flux-system
spec:
  path: ./cluster/apps/default/goldilocks
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: goldilocks
      namespace: default

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-homeassistant
  namespace: flux-system
spec:
  path: ./cluster/apps/default/homeassistant
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: homeassistant
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-jellyfin
  namespace: flux-system
spec:
  path: ./cluster/apps/default/jellyfin
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: jellyfin
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-kopia
  namespace: flux-system
spec:
  path: ./cluster/apps/default/kopia
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: kopia
      namespace: default
  dependsOn:
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-lidarr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/lidarr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: lidarr
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-mosquitto
  namespace: flux-system
spec:
  path: ./cluster/apps/default/mosquitto
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: mosquitto
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-nextcloud
  namespace: flux-system
spec:
  path: ./cluster/apps/default/nextcloud
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: nextcloud
      namespace: default
  dependsOn:
    - name: default-postgrescluster
    - name: default-redis
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-ombi
  namespace: flux-system
spec:
  path: ./cluster/apps/default/ombi
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: ombi
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-prowlarr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/prowlarr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: prowlarr
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-radarr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/radarr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: radarr
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-radicale
  namespace: flux-system
spec:
  path: ./cluster/apps/default/radicale
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: radicale
      namespace: default
  dependsOn:
    - name: default-postgrescluster
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-reloader
  namespace: flux-system
spec:
  path: ./cluster/apps/default/reloader
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: reloader
      namespace: default

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-sonarr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/sonarr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: sonarr
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-syncthing
  namespace: flux-system
spec:
  path: ./cluster/apps/default/syncthing
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: syncthing
      namespace: default
  dependsOn:
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-transmission
  namespace: flux-system
spec:
  path: ./cluster/apps/default/transmission
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: transmission
      namespace: default
  dependsOn:
    - name: nfs-system-nfs-provisioner
    - name: rook-ceph-rook-ceph

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-unpackerr
  namespace: flux-system
spec:
  path: ./cluster/apps/default/unpackerr
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: unpackerr
      namespace: default
  dependsOn:
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-vaultwarden
  namespace: flux-system
spec:
  path: ./cluster/apps/default/vaultwarden
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: vaultwarden
      namespace: default
  dependsOn:
    - name: default-postgrescluster
    - name: nfs-system-nfs-provisioner

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-zigbee2mqtt
  namespace: flux-system
spec:
  path: ./cluster/apps/default/zigbee2mqtt
  sourceRef:
    kind: GitRepository
    name: flux-system
  interval: 30m
  retryInterval: 1m
  timeout: 3m
  prune: true
  healthChecks:
    - apiVersion: helm.toolkit.fluxcd.io/v2beta1
      kind: HelmRelease
      name: zigbee2mqtt
      namespace: default
  dependsOn:
    - name: rook-ceph-rook-ceph
